<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <h2>Sign up page</h2>
    <div>

        <table>
            <tr>
                <td>Name</td>
            </tr>
            <tr>
                <td><input type="text" name="" id=""></td>
            </tr>
            <tr>
                <td>Password</td>
            </tr>
            <tr>
                <td><input type="text" name="" id=""></td>
            </tr>
        </table>
        <input type="button" value="Sign up!" id="btn">
    </div>
        <p id="errorMsg"></p>
        <p></p>
        
        <script>
            window.onload = function() {
                let inputs = document.querySelectorAll('input');
                let errorMsg = document.querySelector('#errorMsg');
                let btn = document.querySelector('#btn');
                btn.onclick = function() {
                    for(let i= 0;i<inputs.length-1;i++) {
                        if (inputs[i].value=='') {
                            errorMsg.innerHTML = 'Error! empty field';
                            return false;
                        }
                    }
                    errorMsg.innerHTML='';
                    let data = {
                        username:inputs[0].value,
                        password:inputs[1].value
                    }
                    let xhr = new XMLHttpRequest();
                    xhr.open('POST','/signup');
                    xhr.setRequestHeader('Content-Type','application/json');
                    xhr.send(JSON.stringify(data));
                    xhr.onload = function() {
                        location.href= '/login';
                    }
                }
            }
            </script>
</body>

</html>
