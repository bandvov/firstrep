
<!DOCTYPE html> 
<html>
<head>
<script>
	window.onload = function() {
		var btn = document.getElementsByClassName('btn')[0]; 

		btn.addEventListener('click', function() {  
			var xhr = new XMLHttpRequest(); 
			xhr.open('PUT', '/edit/' + this.id); 

			var data = {
                id: this.id,
				name: document.getElementById('name').value, 
				description: document.getElementById('description').value, 
				get completed () {
                    return document.getElementById('completed').checked ? 1 : 0
                }
			}

			xhr.setRequestHeader('Content-Type', 'application/json'); 
			xhr.send(JSON.stringify(data)) 
		})
	}
</script>
<link rel="stylesheet" href="style.css">
</head>
<body>
<div class="panel well">
    <h3>Edit item!</h3>
<table>
    <tr>
        <td>
              <label for="name">Name:</label> 
        </td>
    </tr>
    <tr>
        <td>
            <input id="name" type="text"  value="<%= name %>" />

        </td>
    </tr>
<tr>
    <td>
 <label for="description">Description: </label>
    </td>
</tr>
<tr>
    <td>
        <input id="description" type="text" class="form-control" value="<%= description %>" />    </td>
</tr>

</table>
  
 
    </div>
    <div class="form-group">
        <label>Completed: <input id="completed" type="checkbox" <%= completed ? 'checked' : '' %> /></label>
    </div>
    <div class="form-group">
        <a class="btn btn-lg btn-info" href="/edit" id="<%= id %>"><button>Apply</button></a> 
        <h5 style="color: red; font-weight: bold" id="errorMsg"><h5>
    </div>
</div> 
</body> 
</html> 
